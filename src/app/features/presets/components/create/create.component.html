<ion-header>
  <ion-toolbar>
    <ion-title>Preset erstellen</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form
    #createForm="ngForm"
    (ngSubmit)="onSubmit()"
    style="
      display: flex;
      flex-direction: column;
      max-width: 460px;
      margin: 2rem auto;
      gap: 2rem;
    "
  >
    <ion-item>
      <ion-label position="floating" floating>Name</ion-label>
      <ion-input type="text" [(ngModel)]="model.name" name="name"></ion-input>
    </ion-item>
    <ion-item *ngFor="let deviceId of model.devices; let i">
      <ion-label position="floating" floating>Gerät {{ i + 1 }}</ion-label>
      <ion-select
        type="text"
        [(ngModel)]="model.devices[i]"
        name="manufacturer"
      >
        <ion-select-option [value]="null" disabled
          >Gerät auswählen</ion-select-option
        >
        <ion-select-option
          *ngFor="let device of deviceSelection"
          [value]="device.id"
          >{{ device.name }}</ion-select-option
        >
      </ion-select>
    </ion-item>
    <ion-item-divider>
      <ion-label>Gerät hinzufügen</ion-label>
    </ion-item-divider>
    <ion-item>
      <ion-label position="floating" floating>Gerät</ion-label>
      <ion-select
        type="text"
        [(ngModel)]="model.devices[model.devices.length]"
        name="manufacturer"
      >
        <ion-select-option [value]="null" disabled
          >Gerät auswählen</ion-select-option
        >
        <ion-select-option
          *ngFor="let device of deviceSelection"
          [value]="device.id"
          >{{ device.name }}</ion-select-option
        >
      </ion-select>
    </ion-item>
    <ion-button type="submit" expand="block">Erstellen</ion-button>
  </form>
</ion-content>
